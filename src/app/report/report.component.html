<div class="container space">
    <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item">
            <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Relatório Geral</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Relatório Paciente</a>
        </li>
    </ul>
</div>
<div class="tab-content" id="myTabContent">
    <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
        <div class="container space">
            <div class="row justify-content-center">
                <div class="col-8">
                    <strong>Selecione uma unidade:</strong>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col-8">
                    <select class="custom-select myInputTxt" #selectedHealthCenter (change)="getReport(selectedHealthCenter.value)">
                        <option selected [value]="''">Todos</option>
                        <option [value]="posto.id" *ngFor="let posto of postos">{{posto.nome}}</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="container" *ngIf="!isLoading">
            <h1 class="primary-title">Subjetiva</h1>
            <h2 class="secondary-title">Geral</h2>
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Não Frágil</th>
                        <th scope="col">Pré Frágil</th>
                        <th scope="col">Frágil</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th scope="row">Geral</th>
                        <td>{{report.geral.subjetiva.N[0] | number:'2.1-2'}}% ({{ report.geral.subjetiva.N[1] }})</td>
                        <td>{{report.geral.subjetiva.P[0] | number:'2.1-2'}}% ({{ report.geral.subjetiva.P[1] }})</td>
                        <td>{{report.geral.subjetiva.F[0] | number:'2.1-2'}}% ({{ report.geral.subjetiva.F[1] }})</td>
                    </tr>
                </tbody>
            </table>
            <h2 class="secondary-title">Por Sexo</h2>
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Não Frágil</th>
                        <th scope="col">Pré Frágil</th>
                        <th scope="col">Frágil</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th scope="row">Masculino</th>
                        <td>{{report.sexo.subjetiva.M.N[0] | number:'2.1-2'}}% ({{ report.sexo.subjetiva.M.N[1] }})</td>
                        <td>{{report.sexo.subjetiva.M.P[0] | number:'2.1-2'}}% ({{ report.sexo.subjetiva.M.P[1] }})</td>
                        <td>{{report.sexo.subjetiva.M.F[0] | number:'2.1-2'}}% ({{ report.sexo.subjetiva.M.F[1] }})</td>
                    </tr>
                    <tr>
                        <th scope="row">Feminino</th>
                        <td>{{report.sexo.subjetiva.F.N[0] | number:'2.1-2'}}% ({{ report.sexo.subjetiva.F.N[1] }})</td>
                        <td>{{report.sexo.subjetiva.F.P[0] | number:'2.1-2'}}% ({{ report.sexo.subjetiva.F.P[1] }})</td>
                        <td>{{report.sexo.subjetiva.F.F[0] | number:'2.1-2'}}% ({{ report.sexo.subjetiva.F.F[1] }})</td>
                    </tr>
                </tbody>
            </table>
            <h2 class="secondary-title">Por Idade</h2>
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Não Frágil</th>
                        <th scope="col">Pré Frágil</th>
                        <th scope="col">Frágil</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th scope="row">60-69</th>
                        <td>{{report.idade.subjetiva["00-69"].N[0] | number:'2.1-2'}}% ({{ report.idade.subjetiva["00-69"].N[1] }})</td>
                        <td>{{report.idade.subjetiva["00-69"].P[0] | number:'2.1-2'}}% ({{ report.idade.subjetiva["00-69"].P[1] }})</td>
                        <td>{{report.idade.subjetiva["00-69"].F[0] | number:'2.1-2'}}% ({{ report.idade.subjetiva["00-69"].F[1] }})</td>
                    </tr>
                    <tr>
                        <th scope="row">70-79</th>
                        <td>{{report.idade.subjetiva["70-79"].N[0] | number:'2.1-2'}}% ({{ report.idade.subjetiva["70-79"].N[1] }})</td>
                        <td>{{report.idade.subjetiva["70-79"].P[0] | number:'2.1-2'}}% ({{ report.idade.subjetiva["70-79"].P[1] }})</td>
                        <td>{{report.idade.subjetiva["70-79"].F[0] | number:'2.1-2'}}% ({{ report.idade.subjetiva["70-79"].F[1] }})</td>
                    </tr>
                    <tr>
                        <th scope="row">80+</th>
                        <td>{{report.idade.subjetiva["80+"].N[0] | number:'2.1-2'}}% ({{ report.idade.subjetiva["80+"].N[1] }})</td>
                        <td>{{report.idade.subjetiva["80+"].P[0] | number:'2.1-2'}}% ({{ report.idade.subjetiva["80+"].P[1] }})</td>
                        <td>{{report.idade.subjetiva["80+"].F[0] | number:'2.1-2'}}% ({{ report.idade.subjetiva["80+"].F[1] }})</td>
                    </tr>
                </tbody>
            </table>
        
            <h1 class="primary-title">Edmonton</h1>
            <h2 class="secondary-title">Geral</h2>
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Não apresenta fragilidade</th>
                        <th scope="col">Aparentemente vulnerável</th>
                        <th scope="col">Fragilidade leve</th>
                        <th scope="col">Fragilidade moderada</th>
                        <th scope="col">Fragilidade severa</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th scope="row">Geral</th>
                        <td>{{report.geral.edmonton.N[0] | number:'2.1-2'}}% ({{ report.geral.edmonton.N[1] }})</td>
                        <td>{{report.geral.edmonton.V[0] | number:'2.1-2'}}% ({{ report.geral.edmonton.V[1] }})</td>
                        <td>{{report.geral.edmonton.L[0] | number:'2.1-2'}}% ({{ report.geral.edmonton.L[1] }})</td>
                        <td>{{report.geral.edmonton.M[0] | number:'2.1-2'}}% ({{ report.geral.edmonton.M[1] }})</td>
                        <td>{{report.geral.edmonton.S[0] | number:'2.1-2'}}% ({{ report.geral.edmonton.S[1] }})</td>
                </tbody>
            </table>
            <h2 class="secondary-title">Por Sexo</h2>
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Não apresenta fragilidade</th>
                        <th scope="col">Aparentemente vulnerável</th>
                        <th scope="col">Fragilidade leve</th>
                        <th scope="col">Fragilidade moderada</th>
                        <th scope="col">Fragilidade severa</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th scope="row">Masculino</th>
                        <td>{{report.sexo.edmonton.M.N[0] | number:'2.1-2'}}% ({{ report.sexo.edmonton.M.N[1] }})</td>
                        <td>{{report.sexo.edmonton.M.V[0] | number:'2.1-2'}}% ({{ report.sexo.edmonton.M.V[1] }})</td>
                        <td>{{report.sexo.edmonton.M.L[0] | number:'2.1-2'}}% ({{ report.sexo.edmonton.M.L[1] }})</td>
                        <td>{{report.sexo.edmonton.M.M[0] | number:'2.1-2'}}% ({{ report.sexo.edmonton.M.M[1] }})</td>
                        <td>{{report.sexo.edmonton.M.S[0] | number:'2.1-2'}}% ({{ report.sexo.edmonton.M.S[1] }})</td>
                    </tr>
                    <tr>
                        <th scope="row">Feminino</th>
                        <td>{{report.sexo.edmonton.F.N[0] | number:'2.1-2'}}% ({{ report.sexo.edmonton.F.N[1] }})</td>
                        <td>{{report.sexo.edmonton.F.V[0] | number:'2.1-2'}}% ({{ report.sexo.edmonton.F.V[1] }})</td>
                        <td>{{report.sexo.edmonton.F.L[0] | number:'2.1-2'}}% ({{ report.sexo.edmonton.F.L[1] }})</td>
                        <td>{{report.sexo.edmonton.F.M[0] | number:'2.1-2'}}% ({{ report.sexo.edmonton.F.M[1] }})</td>
                        <td>{{report.sexo.edmonton.F.S[0] | number:'2.1-2'}}% ({{ report.sexo.edmonton.F.S[1] }})</td>
                    </tr>
                </tbody>
            </table>
            <h2 class="secondary-title">Por Idade</h2>
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Não apresenta fragilidade</th>
                        <th scope="col">Aparentemente vulnerável</th>
                        <th scope="col">Fragilidade leve</th>
                        <th scope="col">Fragilidade moderada</th>
                        <th scope="col">Fragilidade severa</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th scope="row">60-69</th>
                        <td>{{report.idade.edmonton["00-69"].N[0] | number:'2.1-2'}}% ({{ report.idade.edmonton["00-69"].N[1] }})</td>
                        <td>{{report.idade.edmonton["00-69"].V[0] | number:'2.1-2'}}% ({{ report.idade.edmonton["00-69"].V[1] }})</td>
                        <td>{{report.idade.edmonton["00-69"].L[0] | number:'2.1-2'}}% ({{ report.idade.edmonton["00-69"].L[1] }})</td>
                        <td>{{report.idade.edmonton["00-69"].M[0] | number:'2.1-2'}}% ({{ report.idade.edmonton["00-69"].M[1] }})</td>
                        <td>{{report.idade.edmonton["00-69"].S[0] | number:'2.1-2'}}% ({{ report.idade.edmonton["00-69"].S[1] }})</td>
                    </tr>
                    <tr>
                        <th scope="row">70-79</th>
                        <td>{{report.idade.edmonton["70-79"].N[0] | number:'2.1-2'}}%  ({{ report.idade.edmonton["70-79"].N[1] }})</td>
                        <td>{{report.idade.edmonton["70-79"].V[0] | number:'2.1-2'}}%  ({{ report.idade.edmonton["70-79"].V[1] }})</td>
                        <td>{{report.idade.edmonton["70-79"].L[0] | number:'2.1-2'}}%  ({{ report.idade.edmonton["70-79"].L[1] }})</td>
                        <td>{{report.idade.edmonton["70-79"].M[0] | number:'2.1-2'}}%  ({{ report.idade.edmonton["70-79"].M[1] }})</td>
                        <td>{{report.idade.edmonton["70-79"].S[0] | number:'2.1-2'}}%  ({{ report.idade.edmonton["70-79"].S[1] }})</td>
                    </tr>
                    <tr>
                        <th scope="row">80+</th>
                        <td>{{report.idade.edmonton["80+"].N[0] | number:'2.1-2'}}% ({{ report.idade.edmonton["80+"].N[1] }})</td>
                        <td>{{report.idade.edmonton["80+"].V[0] | number:'2.1-2'}}% ({{ report.idade.edmonton["80+"].V[1] }})</td>
                        <td>{{report.idade.edmonton["80+"].L[0] | number:'2.1-2'}}% ({{ report.idade.edmonton["80+"].L[1] }})</td>
                        <td>{{report.idade.edmonton["80+"].M[0] | number:'2.1-2'}}% ({{ report.idade.edmonton["80+"].M[1] }})</td>
                        <td>{{report.idade.edmonton["80+"].S[0] | number:'2.1-2'}}% ({{ report.idade.edmonton["80+"].S[1] }})</td>
                    </tr>
                </tbody>
            </table>
            <div class="button-primary">
                <button type="button" class="btn btn-primary btn-large" (click)="back()">Voltar</button>
            </div>
        </div>
    </div>
    <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
        <!-- h1 class="primary-title">Pacientes</h1 -->
        <div class="container space">
            <div class="row justify-content-center">
                <div class="col-8">
                    <strong>Filtrar pacientes por unidade:</strong>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col-8">
                    <select class="custom-select myInputTxt" #selectedHealthCenter2 (change)="getReportForPatient(selectedHealthCenter2.value, selectedHealthCenter2)">
                        <option selected [value]="''">Todos</option>
                        <option [value]="posto.id" *ngFor="let posto of postos">{{posto.nome}}</option>
                    </select>
                </div>
            </div>
        </div>
        <div class="container space">
            <h2 class="secondary-title">Pacientes</h2>
            <table class="table" *ngIf="!isLoading">
                <thead>
                    <tr>
                        <th scope="col">Nome</th>
                        <th scope="col">Número SUS</th>
                        <th scope="col">Avaliação Subjetiva</th>
                        <th scope="col">Avaliação Edmonton</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let preport of patientReport">
                        <td>{{preport.nome}}</td>
                        <td>{{preport.n_sus}}</td>
                        <td>{{preport.sub | subjetiva}}</td>
                        <td>{{preport.edm | edmonton}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<div class="container">
    <app-loader *ngIf="isLoading"></app-loader>
</div>